<!doctype html>
<html lang="en">
  <head>
    <!-- Razorpay Checkout.js -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Title Tag -->
    <title>AjnabiCam - Random Video Chat</title>

    <!-- Meta Description (for SEO) -->
    <meta
      name="description"
      content="AjnabiCam - Random Video Chat is an innovative real-time video chat application that allows users to connect for spontaneous and engaging conversations with features like screen sharing, messaging, and more."
    />

    <!-- Keywords (Optional, but can help slightly in some search engines) -->
    <meta
      name="keywords"
      content="omegle, Random Video chat, Random call, Video call, omegel clone, omegle type apps, AjnabiCam, ajnabicam.com, meet, random chat, messages, video chat, screen sharing, real-time messaging, secure video calls"
    />

    <!-- Open Graph Meta Tags (for social media previews) -->
    <meta
      property="og:title"
      content="AjnabiCam - Random Video Chat - Real-time Video Chat Application"
    />
    <meta
      property="og:description"
      content="Connect with people in real-time using AjnabiCam - Random Video Chat, a video chat platform with screen sharing, messaging, and more!"
    />
    <meta property="og:image" content="https://ajnabicam.com/logo.png" />
    <!-- Use the correct image URL -->
    <meta property="og:url" content="https://ajnabicam.com" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Meta Tags (for Twitter previews) -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="AjnabiCam - Random Video Chat - Real-time Video Chat Application"
    />
    <meta
      name="twitter:description"
      content="Experience real-time video chats with screen sharing, messaging, and more. Try AjnabiCam - Random Video Chat today!"
    />
    <meta name="twitter:image" content="https://ajnabicam.com/logo.png" />

    <!-- Robots (Crawling Instruction for Search Engines) -->
    <meta name="robots" content="index, follow" />

    <!-- Canonical URL (Helps avoid duplicate content issues) -->
    <link rel="canonical" href="https://ajnabicam.com" />

    <!-- Additional Open Graph Tags (for better social media integration) -->
    <meta property="og:site_name" content="AjnabiCam - Random Video Chat" />
    <meta property="og:locale" content="en_US" />

    <!-- Viewport Configuration for Mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- PWA Theme Color -->
    <meta name="theme-color" content="#ec4899" />
    <meta name="msapplication-TileColor" content="#ec4899" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="AjnabiCam" />

    <!-- Favicons and PWA Icons -->
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.svg" />
    <link rel="icon" sizes="192x192" href="/icons/icon-192x192.svg" />
    <link rel="icon" sizes="512x512" href="/icons/icon-512x512.svg" />

    <!-- Structured Data (JSON-LD for better search engine understanding) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "AjnabiCam - Random Video Chat",
        "url": "https://ajnabicam.com",
        "description": "AjnabiCam - Random Video Chat is a real-time video chat application designed for spontaneous and engaging conversations with screen sharing, messaging, and more.",
        "image": "https://ajnabicam.com/logo.png",
        "sameAs": [
          "https://twitter.com/ajnabicam",
          "https://www.linkedin.com/company/ajnabicam"
        ]
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- PWA Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/sw.js")
            .then((registration) => {
              console.log("SW registered: ", registration);

              // Check for updates
              registration.addEventListener("updatefound", () => {
                const newWorker = registration.installing;
                newWorker.addEventListener("statechange", () => {
                  if (
                    newWorker.state === "installed" &&
                    navigator.serviceWorker.controller
                  ) {
                    // New version available
                    if (confirm("New version available! Reload to update?")) {
                      newWorker.postMessage({ type: "SKIP_WAITING" });
                      window.location.reload();
                    }
                  }
                });
              });
            })
            .catch((registrationError) => {
              console.log("SW registration failed: ", registrationError);
            });
        });
      }

      // Install prompt
      let deferredPrompt;
      window.addEventListener("beforeinstallprompt", (e) => {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later
        deferredPrompt = e;

        // Show install button/notification
        console.log("PWA install prompt available");

        // You can show a custom install button here
        const installButton = document.createElement("button");
        installButton.textContent = "Install AjnabiCam";
        installButton.style.cssText = `
          position: fixed;
          bottom: 80px;
          right: 20px;
          background: linear-gradient(45deg, #ec4899, #f43f5e);
          color: white;
          border: none;
          padding: 12px 20px;
          border-radius: 25px;
          font-weight: bold;
          box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3);
          z-index: 1000;
          cursor: pointer;
          animation: pulse 2s infinite;
        `;

        installButton.onclick = () => {
          // Show the prompt
          deferredPrompt.prompt();
          // Wait for the user to respond to the prompt
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === "accepted") {
              console.log("User accepted the install prompt");
            }
            deferredPrompt = null;
            installButton.remove();
          });
        };

        document.body.appendChild(installButton);

        // Add pulse animation
        const style = document.createElement("style");
        style.textContent = `
          @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
          }
        `;
        document.head.appendChild(style);
      });

      // Track install
      window.addEventListener("appinstalled", (evt) => {
        console.log("PWA was installed");
      });
    </script>
  </body>
</html>
